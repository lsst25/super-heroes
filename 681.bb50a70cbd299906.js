"use strict";(self.webpackChunktrainee_heroes_app=self.webpackChunktrainee_heroes_app||[]).push([[681],{8681:(Y,g,i)=>{i.r(g),i.d(g,{BattleModule:()=>F});var s=i(9808),d=i(683),m=i(4466),a=i(6696),e=i(5e3),p=i(7737),h=i(3688),f=i(2060),_=i(8332),l=i(9224);function x(o,r){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" Intelligence: ",t.hero.powerstats.intelligence," ")}}function w(o,r){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" Strength: ",t.hero.powerstats.strength," ")}}function v(o,r){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" Speed: ",t.hero.powerstats.speed," ")}}function b(o,r){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" Durability: ",t.hero.powerstats.durability," ")}}function C(o,r){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" Power: ",t.hero.powerstats.power," ")}}function H(o,r){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" Combat: ",t.hero.powerstats.combat," ")}}function Z(o,r){if(1&o&&(e.TgZ(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-subtitle"),e._uU(5),e.qZA()(),e._UZ(6,"img",2),e.TgZ(7,"mat-card-content")(8,"ul",3),e.YNc(9,x,2,1,"li",4),e.YNc(10,w,2,1,"li",4),e.YNc(11,v,2,1,"li",4),e.YNc(12,b,2,1,"li",4),e.YNc(13,C,2,1,"li",4),e.YNc(14,H,2,1,"li",4),e.qZA()()()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.hero.name),e.xp6(2),e.Oqu(t.hero.biography["full-name"]),e.xp6(1),e.Q6J("src",t.hero.image.url,e.LSH),e.xp6(3),e.Q6J("ngIf","null"!==t.hero.powerstats.intelligence),e.xp6(1),e.Q6J("ngIf","null"!==t.hero.powerstats.strength),e.xp6(1),e.Q6J("ngIf","null"!==t.hero.powerstats.speed),e.xp6(1),e.Q6J("ngIf","null"!==t.hero.powerstats.durability),e.xp6(1),e.Q6J("ngIf","null"!==t.hero.powerstats.power),e.xp6(1),e.Q6J("ngIf","null"!==t.hero.powerstats.combat)}}let y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-battle-hero"]],inputs:{hero:"hero"},decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],["mat-card-image","","alt","Hero img",3,"src"],[1,"stats-list"],[4,"ngIf"]],template:function(t,n){1&t&&e.YNc(0,Z,15,9,"mat-card",0),2&t&&e.Q6J("ngIf",n.hero)},directives:[s.O5,l.a8,l.dk,l.n5,l.$j,l.G2,l.dn],styles:[".card[_ngcontent-%COMP%]{max-width:400px;cursor:pointer;margin:0 auto 10px;transition:background-color .25s}.card[_ngcontent-%COMP%]:hover{background-color:#0000001a;transition:background-color .25s}ul[_ngcontent-%COMP%]{list-style:none}"],changeDetection:0}),o})();var B=i(7423),S=i(773);const T=function(o){return{selected:o}};function M(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",8),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw().onSelectPowerup(u.id)}),e.TgZ(1,"p"),e._uU(2),e.qZA()()}if(2&o){const t=r.$implicit;e.Q6J("ngClass",e.VKq(2,T,t.selected)),e.xp6(2),e.Oqu(t.title)}}function O(o,r){1&o&&(e.TgZ(0,"div",9),e._UZ(1,"mat-spinner"),e.qZA())}let A=(()=>{class o{constructor(t){this.heroStoreService=t,this.fighting=!1,this.fight=new e.vpe,this.powerups=null}ngOnInit(){this.powerupsSub=this.heroStoreService.powerupsSubject.subscribe(t=>{this.powerups=t.filter(n=>n.usesLeft>0)})}onSelectPowerup(t){this.heroStoreService.toggleSelectPowerup(t)}onStart(){this.fight.emit()}ngOnDestroy(){var t;null===(t=this.powerupsSub)||void 0===t||t.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.s))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-battle-menu"]],inputs:{ownHeroName:"ownHeroName",enemyHero:"enemyHero",fighting:"fighting"},outputs:{fight:"fight"},decls:15,vars:5,consts:[[1,"menu"],[1,"hero-name","mat-elevation-z6"],["mat-raised-button","","color","primary","type","button",1,"mat-elevation-z6",3,"disabled","click"],[1,"powerups","mat-elevation-z6"],[1,"powerups-title"],[1,"powerups-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["style","text-align: center","class","spinner",4,"ngIf"],[3,"ngClass","click"],[1,"spinner",2,"text-align","center"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p"),e._uU(3),e.qZA()(),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.onStart()}),e._uU(5," Start "),e.qZA(),e.TgZ(6,"div",1)(7,"p"),e._uU(8),e.qZA()(),e.TgZ(9,"div",3)(10,"p",4),e._uU(11,"Powerups:"),e.qZA(),e.TgZ(12,"ul",5),e.YNc(13,M,3,4,"li",6),e.qZA()(),e.YNc(14,O,2,0,"div",7),e.qZA()),2&t&&(e.xp6(3),e.Oqu(n.ownHeroName),e.xp6(1),e.Q6J("disabled",n.fighting),e.xp6(4),e.Oqu(n.enemyHero),e.xp6(5),e.Q6J("ngForOf",n.powerups),e.xp6(1),e.Q6J("ngIf",n.fighting))},directives:[B.lW,s.sg,s.mk,s.O5,S.Ou],styles:["p[_ngcontent-%COMP%]{margin:0}ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}li[_ngcontent-%COMP%]{padding:3px;transition:border .3s}li[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#0000001a;border-radius:5px;transition:border .3s}button[_ngcontent-%COMP%]{transition:box-shadow .25s}button[_ngcontent-%COMP%]:hover{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f,inset 0 0 12px #ffffff40;transition:box-shadow .2s}.menu[_ngcontent-%COMP%]{height:100%;display:flex;gap:15px;flex-flow:column nowrap;justify-content:center;text-align:center}.hero-name[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;height:35px;background-color:#fff;border-radius:4px}.powerups[_ngcontent-%COMP%]{justify-self:end;background-color:#fff;border-radius:4px}.powerups-title[_ngcontent-%COMP%]{padding:5px;border-bottom:1px solid rgba(0,0,0,.125)}.powerups-list[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;gap:1px}li.selected[_ngcontent-%COMP%]{background-color:#673ab7;color:#fff;border-radius:4px}li[_ngcontent-%COMP%]:not(.selected){transition:background-color .25s}li.selected[_ngcontent-%COMP%]{transition:background-color .25s}.spinner[_ngcontent-%COMP%]{align-self:center}"],changeDetection:0}),o})();function P(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-alert",7),e.NdJ("close",function(){return e.CHM(t),e.oxw().onResultsClose()}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("message",t.winner)}}const I=[{path:"",component:(()=>{class o{constructor(t,n,c,u){this.heroStoreService=t,this.fetchHeroService=n,this.battle=c,this.cd=u,this.fighting=!1,this.winner=null}ngOnInit(){this.ownHeroSub=this.heroStoreService.selectedHeroSubject.subscribe(t=>this.ownHero=t),this.getRandomHero()}onResultsClose(){this.winner=null}onFight(){this.fighting=!0,this.heroStoreService.usePowerups(),this.battleSub=this.battle.battle(this.ownHero,this.enemyHero).subscribe(t=>{var n;this.winner=t.name+" won the fight!",this.fighting=!1,this.cd.detectChanges(),null===(n=this.battleSub)||void 0===n||n.unsubscribe()})}getRandomHero(){this.fetchHeroService.fetchRandomHero().subscribe(t=>{this.enemyHero=t,this.cd.detectChanges()})}ngOnDestroy(){var t,n;null===(t=this.ownHeroSub)||void 0===t||t.unsubscribe(),null===(n=this.battleSub)||void 0===n||n.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.s),e.Y36(h.r),e.Y36(f._),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-battle"]],decls:8,vars:8,consts:[[3,"message","close",4,"ngIf"],[1,"row"],[1,"col","order-1","order-sm-1"],[3,"routerLink","hero"],[1,"col-12","col-sm-4","order-3","order-sm-2"],[3,"fighting","ownHeroName","enemyHero","fight"],[1,"col","order-2","order-sm-3"],[3,"message","close"]],template:function(t,n){1&t&&(e.YNc(0,P,1,1,"app-alert",0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"app-battle-hero",3),e.qZA(),e.TgZ(4,"div",4)(5,"app-battle-menu",5),e.NdJ("fight",function(){return n.onFight()}),e.qZA()(),e.TgZ(6,"div",6),e._UZ(7,"app-battle-hero",3),e.qZA()()),2&t&&(e.Q6J("ngIf",n.winner),e.xp6(3),e.Q6J("routerLink","/hero-info/"+n.ownHero.id)("hero",n.ownHero),e.xp6(2),e.Q6J("fighting",n.fighting)("ownHeroName",(null==n.ownHero?null:n.ownHero.name)||"")("enemyHero",(null==n.enemyHero?null:n.enemyHero.name)||""),e.xp6(2),e.Q6J("routerLink","/hero-info/"+(null==n.enemyHero?null:n.enemyHero.id))("hero",n.enemyHero))},directives:[s.O5,_.w,y,a.rH,A],styles:[""],changeDetection:0}),o})(),canActivate:[i(8108).A,(()=>{class o{constructor(t,n){this.heroStoreService=t,this.router=n}canActivate(t,n){return!!this.heroStoreService.lastSelectedHero||this.router.createUrlTree(["/select"])}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(p.s),e.LFG(a.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()]}];let Q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,a.Bz.forChild(I)],a.Bz]}),o})(),F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,d.q,m.m,Q],a.Bz]}),o})()}}]);